<!DOCTYPE html>
<html>
  <head>
    <title>jbbarth.com - Vérifier l'état des interfaces d'un switch fibre</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/reset.css" />
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/app.css" />
    <meta http-equiv="cache-control" content="max-age=10, must-revalidate" />
    <meta charset="utf-8">
    <meta name="generator" content="nanoc 3.2.3">
  </head>
  <body>
    <div id="container">
      <div id="header">
        <a href="/">Home</a>
        <a href="https://github.com/jbbarth" target="_blank">GitHub</a>
        <a href="https://twitter.com/jbbarth" target="_blank">Twitter</a>
      </div>
      <div id="content">
        <h1>Vérifier l'état des interfaces d'un switch fibre</h1>

<p>Là où je bosse, on a la chance (?) de disposer d’un <a href="http://fr.wikipedia.org/wiki/R%C3%A9seau_de_stockage_SAN"><span class="caps">SAN</span></a>,
c’est-à-dire d’un réseau dédié au stockage. En l’occurence c’est un réseau fibre, et tous les flux passent par deux switches fibre McData Sphereon 4500…
qu’il faut surveiller d’une manière ou d’une autre.</p>

<p>En l’occurrence on surveille tout ça par Nagios. L’ancien script (qui doit faire partie des nagios plugins du site officiel ?) vérifiait les interfaces
une par une, ce qui est gênant dans un environnement évolutif (oubli d’interfaces non surveillées!). Il faisait d’autres choses (check trafic rx/tx, errors)
que mon script ne fait pas, mais il ne demande qu’à être amélioré ;-)</p>

<p>Voici donc un script de remplacement qui check toutes les interfaces d’un coup. Gros avantage : on passe les ports non branchés en exception, mais si un
port est vu “up” et qu’il est en exception le script sort en Critical. Cela force à maintenir la liste des exceptions à jour ;-)</p>

<p>PS: Il faut bien sûr que ruby soit installé sur votre serveur de supervision.</p>

<p><b>EDIT(09/11/2012):</b> Le script n'est plus disponible ici mais l'est sur mon <a href="http://github.com/jbbarth/monitoring">profil github</a></p>

      </div>
    </div>
  </body>
</html>
