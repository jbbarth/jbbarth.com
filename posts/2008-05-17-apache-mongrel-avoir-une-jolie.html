<!DOCTYPE html>
<html>
  <head>
    <title>jbbarth.com - Apache + mongrel : avoir une jolie URL</title>
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/reset.css" />
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/text.css" />
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/960.css" />
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/app.css" />
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/rainbow/github.css" />
    <script type="text/javascript" src="/javascripts/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="/javascripts/rainbow-custom.min.js"></script>
    <script type="text/javascript" src="/javascripts/app.js"></script>
    <meta http-equiv="cache-control" content="max-age=10, must-revalidate" />
    <meta charset="utf-8">
    <meta name="generator" content="nanoc 3.2.3">
  </head>
  <body>
    <div id="container" class="container_16">
      <div class="grid_4">
        <div id="sidebar">
  <a href="/" class="sitetitle">jbbarth.com</a>
  <p>
    I'm a sysadmin & developer from Paris, France. I love building tools for
    ops, and I am an irregular contributor to many open-source projects.
  </p>
  <p>
    Find me as jbbarth on <a href="https://github.com/jbbarth">GitHub</a> and
    <a href="https://twitter.com/jbbarth">Twitter</a>, or salvor on Freenode
    IRC.
  </p>
</div>

      </div>
      <div class="grid_12">
        <div id="content">
          <h1>Apache + mongrel : avoir une jolie URL</h1>

<p>Comme promis précédemment, un petit tuto pour avoir une <span class="caps">URL</span> un peu moins brute que http://vds171.sivit.org:8000/ pour ce blog.
Pourquoi pas http://pada.chanmasters.com/ ?<br>
Suivez le guide !</p>

<p>Rien de bien compliqué en vérité. Il faut au préalable configurer Bind (ou équivalent) pour que votre sous domaine soit reconnu. Cette étape n’est pas
obligatoire, selon votre configuration de <span class="caps">DNS</span> et le passif de cette config. 2e étape, mapper cette <span class="caps">URL</span>
(qui redirige donc vers votre serveur sur le port 80) à votre <span class="caps">URL</span> de serveur Mongrel, via un “ProxyPass”. Cette directive peut être
utilisée pour redirigée sur une autre machine au passage (c’est ce que fait un “reverse proxy” dans un centre-serveur notamment). Chez moi, tout est dans
/etc/apache2/conf.d/vhosts.conf. Mais vous pouvez mettre ces directives dans un “sites-enabled” puis utiliser “a2ensite” pour activer le site. Je suis en
Apache 2.2.3, et ça donne donc :</p>
<pre>
&lt;VirtualHost&gt;
      ServerName pada.chanmasters.com
      ProxyPass / http://pada.chanmasters.com:8000/
      ProxyPassReverse / http://pada.chanmasters.com:8000/
      ProxyPreserveHost on
&lt;/VirtualHost&gt;
</pre>

<p>NB: j’aurais pû mettre http://vds171.sivit.org:8000/ ça aurait fonctionné aussi ! Il semble cependant que “localhost” ne passe pas, le ProxyPass ne fonctionne alors pas. On obtient une erreur 503 “Service Temporarily Unavailable” caractéristique d’un serveur “distant” inaccessible. Comme si le mongrel n’était pas démarré, donc.</p>

<p>Un reload d’Apache suffit ensuite à accéder à votre mongrel :</p>

        </div>
      </div>
    </div>
    <div id=footer>
  <div class=container_16>
    <div class=grid_7>
      <h2>Promoted Posts</h2>
      <ul>
        <li><a href="/posts/2011-06-12-cas-authentication-for-redmine.html">CAS Authentication for Redmine</a></li>
        <li><a href="/posts/2011-12-12-trying-cloudfoundry-with-vagrant-and.html">Trying CloudFoundry with Vagrant ... and some patience</a></li>
        <li><a href="/posts/2009-08-24-supervision-cpu-via-snmp.html">[fr] Supervision CPU via SNMP</a></li>
        <li><a href="/posts/2009-06-06-extension-dun-disque-lvm-en.html">[fr] Extension d'un disque LVM en environnement SAN</a></li>
        <li><a href="/posts/2008-05-21-introduction-a-lurl-rewriting.html">[fr] Introduction à l'URL rewriting</a></li>
        <li><a href="/posts/2008-05-16-introduction-aux-expressions-regulieres.html">[fr] Introduction aux expressions régulières</a></li>
      </ul>
    </div>
    <div class=grid_7>
      <h2>Projects</h2>
      <ul>
        <li>
          <b><a href="http://www.redmine.org/">Redmine</a></b>
          <em>(occasional contributor, prolific plugin author)</em>
          <br>
          Flexible project management web application. You can find all my plugins
          <a href="https://github.com/jbbarth">on GitHub</a>.
        </li>
        <li>
          <b><a href="http://cartoque.org/">Cartoque</a></b>
          <em>(main developer)</em>
          <br>
          Tiny CMDB solution I built for my current job.
        </li>
      </ul>
    </div>
    <div class=grid_2>
      <h2>Links</h2>
      <p>
        <a href="/notes.html">Tech notes</a>
      </p>
    </div>
  </div>
</div>

  </body>
</html>
