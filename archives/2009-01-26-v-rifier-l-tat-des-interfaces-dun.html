<!DOCTYPE html>
<html>
  <head>
    <title>jbbarth.com - Vérifier l'état des interfaces d'un switch fibre</title>
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/reset.css" />
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/text.css" />
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/960.css" />
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/app.css" />
    <link rel="stylesheet" type="text/css" media="all" href="/stylesheets/rainbow/github.css" />
    <script type="text/javascript" src="/javascripts/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="/javascripts/rainbow-custom.min.js"></script>
    <script type="text/javascript" src="/javascripts/app.js"></script>
    <meta http-equiv="cache-control" content="max-age=10, must-revalidate" />
    <meta charset="utf-8">
    <meta name="generator" content="nanoc 3.2.3">
  </head>
  <body>
    <div id="container" class="container_16">
      <div class="grid_4">
        <div id="sidebar">
  <a href="/" class="sitetitle">jbbarth.com</a>
  <p>
    I'm a sysadmin & developer from Paris, France. I love building tools for
    ops, and I am an irregular contributor to many open-source projects.
  </p>
  <p>
    Find me as jbbarth on <a href="https://github.com/jbbarth">GitHub</a> and
    <a href="https://twitter.com/jbbarth">Twitter</a>, or salvor on Freenode
    IRC.
  </p>
</div>

      </div>
      <div class="grid_12">
        <div id="content">
          <h1>Vérifier l'état des interfaces d'un switch fibre</h1>

<p>Là où je bosse, on a la chance (?) de disposer d’un <a href="http://fr.wikipedia.org/wiki/R%C3%A9seau_de_stockage_SAN"><span class="caps">SAN</span></a>,
c’est-à-dire d’un réseau dédié au stockage. En l’occurence c’est un réseau fibre, et tous les flux passent par deux switches fibre McData Sphereon 4500…
qu’il faut surveiller d’une manière ou d’une autre.</p>

<p>En l’occurrence on surveille tout ça par Nagios. L’ancien script (qui doit faire partie des nagios plugins du site officiel ?) vérifiait les interfaces
une par une, ce qui est gênant dans un environnement évolutif (oubli d’interfaces non surveillées!). Il faisait d’autres choses (check trafic rx/tx, errors)
que mon script ne fait pas, mais il ne demande qu’à être amélioré ;-)</p>

<p>Voici donc un script de remplacement qui check toutes les interfaces d’un coup. Gros avantage : on passe les ports non branchés en exception, mais si un
port est vu “up” et qu’il est en exception le script sort en Critical. Cela force à maintenir la liste des exceptions à jour ;-)</p>

<p>PS: Il faut bien sûr que ruby soit installé sur votre serveur de supervision.</p>

<p><b>EDIT(09/11/2012):</b> Le script n'est plus disponible ici mais l'est sur mon <a href="http://github.com/jbbarth/monitoring">profil github</a></p>

        </div>
      </div>
    </div>
    <div id=footer>
  <div class=container_16>
    <div class=grid_8>
      <h2>Promoted Posts</h2>
      <ul>
        <li><a href="/posts/2011-06-12-cas-authentication-for-redmine.html">CAS Authentication for Redmine</a></li>
        <li><a href="/posts/2011-12-12-trying-cloudfoundry-with-vagrant-and.html">Trying CloudFoundry with Vagrant ... and some patience</a></li>
        <li><a href="/posts/2009-08-24-supervision-cpu-via-snmp.html">[fr] Supervision CPU via SNMP</a></li>
        <li><a href="/posts/2009-06-06-extension-dun-disque-lvm-en.html">[fr] Extension d'un disque LVM en environnement SAN</a></li>
        <li><a href="/posts/2008-05-21-introduction-a-lurl-rewriting.html">[fr] Introduction à l'URL rewriting</a></li>
        <li><a href="/posts/2008-05-16-introduction-aux-expressions-regulieres.html">[fr] Introduction aux expressions régulières</a></li>
      </ul>
    </div>
    <div class=grid_8>
      <h2>Archives</h2>
      <ul>
        <li><a href="/archives.html">All articles</a></li>
      </ul>
    </div>
  </div>
</div>

    <script type="text/javascript">
      var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.type  = 'text/javascript';
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4e3bca6b613f5d70ee000001');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();
    </script>
  </body>
</html>
